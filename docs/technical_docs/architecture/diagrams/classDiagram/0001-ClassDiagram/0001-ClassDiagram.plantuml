@startuml ClassDiagram

enum TypeSystemUser {
  PROFESSOR
  ALUNO
  ADMIN
  MODERADOR
  OPERADOR
}

enum StatusSystemUser {
  ATIVO
  BLOQUEADO
  INATIVO
}

enum StatusConteudo {
  RASCUNHO
  ATIVO
  INATIVO
}

enum TipoQuestao {
  MULTIPLA
  VERDADEIRO_FALSO
  ABERTA
}

enum StatusQuestao {
  ATIVO
  INATIVO
}

enum TipoAtividade {
  PROVA
  SIMULADO
  ATIVIDADE
}

enum StatusAtividade {
  ATIVO
  INATIVO
}

enum StatusTurma {
  ATIVO
  INATIVO
}

class SystemUser {
  - id: int
  - name: string
  - email: string
  - password: string
  - type: TypeSystemUser
  - criador: int
  - ultimo_editor: int
  - status: StatusSystemUser
  - created_at: datetime
  - updated_at: datetime
  --
  + getId(): int
  + getName(): string
  + getEmail(): string
  + getType(): TypeSystemUser
  + getStatus(): StatusSystemUser
}

class Materia {
  - id: int
  --
  + getId(): int
}

class Conteudo {
  - id: int
  - title: string
  - content: longText
  - id_materia: int
  - criador: int
  - ultimo_editor: int
  - status: StatusConteudo
  - created_at: datetime
  - updated_at: datetime
  - published_at: datetime
  --
  + getId(): int
  + getTitle(): string
  + getContent(): string
  + getStatus(): StatusConteudo
  + publish(): void
}

class ContentTag {
  - id: int
  - tag_name: string
  - is_moderator_only: boolean
  - count: integer
  - description: string
  - criador: int
  - ultimo_editor: int
  - created_at: datetime
  - updated_at: datetime
  --
  + getId(): int
  + getTagName(): string
  + getCount(): int
}

class ContentImage {
  - id: int
  - file_name: string
  - file_path: string
  - alt_text: string
  - base64_data: string
  - mime_type: string
  - created_at: datetime
  - updated_at: datetime
  --
  + getId(): int
  + getFileName(): string
  + getFilePath(): string
}

class ContentType {
  - id: int
  - title: string
  - description: string
  - criador: int
  - ultimo_editor: int
  - created_at: datetime
  - updated_at: datetime
  --
  + getId(): int
  + getTitle(): string
  + getDescription(): string
}

class Questao {
  - id: int
  - titulo: string
  - corpo: string
  - id_materia: int
  - criador: int
  - ultimo_editor: int
  - created_at: datetime
  - updated_at: datetime
  - status: StatusQuestao
  - tipo: TipoQuestao
  --
  + getId(): int
  + getTitulo(): string
  + getCorpo(): string
  + getTipo(): TipoQuestao
  + getStatus(): StatusQuestao
  + getAlternativas(): List<Alternativa>
}

class Alternativa {
  - id: int
  - id_questao: int
  - valor: string
  - correta: boolean
  - criador: int
  - ultimo_editor: int
  - created_at: datetime
  - updated_at: datetime
  - status: StatusQuestao
  --
  + getId(): int
  + getValor(): string
  + isCorreta(): boolean
  + getStatus(): StatusQuestao
}

class Atividade {
  - id: int
  - nome: string
  - id_materia: int
  - tipo: TipoAtividade
  - prazoFinal: datetime
  - criador: int
  - ultimo_editor: int
  - created_at: datetime
  - updated_at: datetime
  - status: StatusAtividade
  --
  + getId(): int
  + getNome(): string
  + getTipo(): TipoAtividade
  + getPrazoFinal(): datetime
  + getQuestoes(): List<Questao>
  + getTurmas(): List<Turma>
  + isVencida(): boolean
}

class AtividadeQuestao {
  - id: int
  - id_atividade: int
  - id_questao: int
  - criador: int
  - ultimo_editor: int
  - status: StatusAtividade
  - created_at: datetime
  - updated_at: datetime
  --
  + getId(): int
  + getIdAtividade(): int
  + getIdQuestao(): int
}

class Turma {
  - id: int
  - nome: string
  - limite: int
  - status: StatusTurma
  - id_responsavel: int
  - criador: int
  - ultimo_editor: int
  - created_at: datetime
  - updated_at: datetime
  --
  + getId(): int
  + getNome(): string
  + getLimite(): int
  + getStatus(): StatusTurma
  + getAlunos(): List<SystemUser>
  + getAtividades(): List<Atividade>
  + adicionarAluno(aluno: SystemUser): void
}

class TurmaAluno {
  - id: int
  - id_turma: int
  - id_aluno: int
  - criador: int
  - ultimo_editor: int
  - status: StatusAtividade
  - created_at: datetime
  - updated_at: datetime
  --
  + getId(): int
  + getIdTurma(): int
  + getIdAluno(): int
}

' Relacionamentos com notação Crow's Foot
SystemUser ||--o{ Conteudo : "criador/editor"
SystemUser ||--o{ ContentTag : "criador/editor"
SystemUser ||--o{ ContentType : "criador/editor"
SystemUser ||--o{ Questao : "criador/editor"
SystemUser ||--o{ Alternativa : "criador/editor"
SystemUser ||--o{ Atividade : "criador/editor"
SystemUser ||--|{ Turma : "responsavel"
SystemUser ||--o{ Turma : "criador/editor"

Materia ||--o{ Conteudo : "contém"
Materia ||--o{ Questao : "contém"
Materia ||--o{ Atividade : "contém"

Conteudo }o--o{ ContentTag : "tem"
Conteudo ||--o{ ContentImage : "contém"
Conteudo }|--|| ContentType : "tem"

Questao ||--o{ Alternativa : "contém"
Questao }o--o{ Atividade : "incluída em"
Questao }o--o{ AtividadeQuestao : "referenciada"

Atividade ||--o{ AtividadeQuestao : "contém"
Atividade }o--o{ Turma : "atribuída"

Turma ||--o{ TurmaAluno : "contém"
TurmaAluno }o--|{ SystemUser : "representa"

SystemUser --|> TypeSystemUser : tipo
SystemUser --|> StatusSystemUser : status
Conteudo --|> StatusConteudo : status
Questao --|> TipoQuestao : tipo
Questao --|> StatusQuestao : status
Alternativa --|> StatusQuestao : status
Atividade --|> TipoAtividade : tipo
Atividade --|> StatusAtividade : status
Turma --|> StatusTurma : status

@enduml