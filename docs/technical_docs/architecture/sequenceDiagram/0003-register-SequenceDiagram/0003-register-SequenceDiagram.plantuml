
E aqui está o diagrama UML atualizado correspondente:

```plantuml
@startuml
actor "Usuário" as User
participant "Web App(Frontend)" as Web
participant "Auth API(Backend)" as Auth
database "User DB" as DB
participant "Session Store" as Session

User -> Web: Abre página de registro
activate Web

User -> Web: Preenche formulário (nome, email, senha, tipo de usuário)
User -> Web: Clica em "Registrar"

Web -> Auth: POST /api/register {nome, email, senha, tipo_usuario}
activate Auth

Auth -> DB: Verifica se email já existe
activate DB
DB --> Auth: resultado da consulta
deactivate DB

alt email já existe
    Auth -> Web: 409 Conflict {erro: "Email já cadastrado"}
    Web -> User: Mostrar mensagem de erro
else email disponível
    Auth -> Auth: Hash da senha
    Auth -> DB: Criar novo usuário {nome, email, password_hash, tipo_usuario}
    activate DB
    DB --> Auth: usuário criado com ID
    deactivate DB
    
    Auth -> Session: criar sessão / token (JWT)
    activate Session
    Session --> Auth: token / session id
    deactivate Session
    
    Auth -> Web: 201 Created {token, user_info}
    Web -> User: Redirecionar para dashboard / salvar token
end

deactivate Auth
deactivate Web
@enduml